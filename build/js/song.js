"use strict";$(function(){function t(t){$(".cover").attr("src",t)}function e(t,e){$("#musicTitle").text(t),i(e)}function n(t){var e=document.createElement("audio");e.src=t,$(".icon-wrap").on("click",function(){e.play(),$(".halo").addClass("turn"),$(".cover").addClass("turn"),$(this).css({display:"none"}),setInterval(function(){for(var t=e.currentTime,n=~~(t/60),i=t-60*n,r=a(n)+":"+a(i),o=$(".line> p"),c=void 0,s=0;s<o.length;s++){var l=o.eq(s).attr("data-time"),u=o.eq(s+1).attr("data-time");if(0!==o.eq(s+1).length&&l<r&&u>r){c=o.eq(s);break}}if(c){c.addClass("active").prev().removeClass("active");var f=c.offset().top-$(".line").offset().top-$(".lyric").height()/3;$(".line").css("transform","translateY(-"+f+"px)")}},300)})}function a(t){return t>=10?t+"":"0"+t}function i(t){if(""===t){var e=$(".line"),n=$("</p>");return n.text("纯音乐,无歌词"),n.appendTo(e)}var a=t.split("\n"),i=/^\[(.+)\](.*)$/;(a=a.map(function(t,e){var n=t.match(i);if(n)return{tiem:n[1],words:n[2]}})).map(function(t){if(t){var e=$(".line"),n=$("</p>");n.attr("data-time",t.tiem).text(t.words),n.appendTo(e)}})}var r=location.search.match(/\bid=([^&]*)/)[1];$.get("./songs.json").then(function(a){var i=a.filter(function(t){return t.id===r})[0],o=i.url,c=i.name,s=i.lyric,l=i.albumImage;n.call(void 0,o),e(c,s),t(l)})});